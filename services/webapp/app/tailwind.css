/* KaTeX styles for math rendering */
@import 'katex/dist/katex.min.css';

@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --audit-trail-width: 0px;
  --audit-trail-panel-width: 0px;
}

body.audit-trail-open .playground-shell {
  margin-right: var(--audit-trail-width);
  transition: margin-right 0.3s ease;
}

:root {
  --audit-trail-scrollbar-width: 6px;
}

body {
  scrollbar-width: thin;
  scrollbar-color: rgba(132, 90, 255, 0.35) transparent;
}

body::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

body::-webkit-scrollbar-thumb {
  background-color: rgba(132, 90, 255, 0.35);
  border-radius: 999px;
  border: 2px solid transparent;
}

body::-webkit-scrollbar-track {
  background: transparent;
}

:root {
  --audit-trail-scrollbar-width: 6px;
}

.audit-trail-scroll {
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
  scrollbar-gutter: stable both-edges;
}

.audit-trail-scroll:hover,
.audit-trail-scroll:focus-within {
  scrollbar-color: rgba(168, 85, 247, 0.35) transparent;
}

.audit-trail-scroll::-webkit-scrollbar {
  width: var(--audit-trail-scrollbar-width);
  height: var(--audit-trail-scrollbar-width);
}

.audit-trail-scroll::-webkit-scrollbar-thumb {
  background-color: transparent;
  border-radius: 999px;
}

.audit-trail-scroll:hover::-webkit-scrollbar-thumb,
.audit-trail-scroll:focus-within::-webkit-scrollbar-thumb {
  background-color: rgba(168, 85, 247, 0.35);
}

.audit-trail-scroll::-webkit-scrollbar-track {
  background-color: transparent;
}

.audit-trail-scroll.no-scrollbar {
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.audit-trail-scroll.no-scrollbar::-webkit-scrollbar {
  display: none;
}

.guidance-scroll {
  scrollbar-width: none;
  -ms-overflow-style: none;
  overscroll-behavior-y: contain;
}

.guidance-scroll::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.guidance-scroll:hover,
.guidance-scroll:focus,
.guidance-scroll:focus-within,
.guidance-scroll:active {
  scrollbar-width: thin;
  -ms-overflow-style: auto;
}

.guidance-scroll:hover::-webkit-scrollbar,
.guidance-scroll:focus::-webkit-scrollbar,
.guidance-scroll:focus-within::-webkit-scrollbar,
.guidance-scroll:active::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

.guidance-scroll:hover::-webkit-scrollbar-thumb,
.guidance-scroll:focus::-webkit-scrollbar-thumb,
.guidance-scroll:focus-within::-webkit-scrollbar-thumb,
.guidance-scroll:active::-webkit-scrollbar-thumb {
  background-color: rgba(168, 85, 247, 0.35);
  border-radius: 999px;
}

.guidance-scroll:hover::-webkit-scrollbar-track,
.guidance-scroll:focus::-webkit-scrollbar-track,
.guidance-scroll:focus-within::-webkit-scrollbar-track,
.guidance-scroll:active::-webkit-scrollbar-track {
  background: transparent;
}

@layer utilities {

  /* Custom animation for agent deployment */
  @keyframes agent-pulse {

    0%,
    100% {
      opacity: 0.6;
      transform: scale(1);
    }

    50% {
      opacity: 1;
      transform: scale(1.05);
    }
  }

  @keyframes node-appear {
    0% {
      transform: scale(0);
      opacity: 0;
    }

    60% {
      transform: scale(1.2);
      opacity: 0.8;
    }

    100% {
      transform: scale(1);
      opacity: 1;
    }
  }

  /* Fade-in animation for agent task responses */
  @keyframes fadeIn {
    0% {
      opacity: 0;
      transform: translateY(10px);
    }

    100% {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Shimmer animation for loading progress bar */
  @keyframes shimmer {
    0% {
      transform: translateX(-100%);
    }

    100% {
      transform: translateX(200%);
    }
  }

  .animate-agent-pulse {
    animation: agent-pulse 2s infinite;
  }

  .animate-node-appear {
    animation: node-appear 0.6s forwards;
  }

  .animate-fadeIn {
    animation: fadeIn 0.6s ease-out forwards;
  }

  .animate-shimmer {
    animation: shimmer 2s infinite;
  }

  /* Border Beam Animation */
  @property --angle {
    syntax: '<angle>';
    initial-value: 0deg;
    inherits: false;
  }

  @keyframes border-rotate {
    from {
      --angle: 0deg;
    }

    to {
      --angle: 360deg;
    }
  }

  .border-beam {
    position: relative;
  }

  .border-beam::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    padding: 2px;
    background: conic-gradient(from var(--angle), transparent 0%, transparent 80%, #A855F7 100%);
    -webkit-mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask:
      linear-gradient(#fff 0 0) content-box,
      linear-gradient(#fff 0 0);
    mask-composite: exclude;
    animation: border-rotate 4s steps(120) infinite;
    pointer-events: none;
  }
}

@layer base {
  :root {
    /* Font families */
    --font-display: 'Outfit', ui-sans-serif, system-ui, sans-serif;
    --font-ui: 'Sora', ui-sans-serif, system-ui, sans-serif;
    --font-body: 'Plus Jakarta Sans', ui-sans-serif, system-ui, sans-serif;

    /* Base theme colors */
    --color-primary: 108, 92, 231;
    /* #6C5CE7 */
    --color-complementary: 215, 231, 92;
    /* #D7E75C */

    /* Text colors */
    --color-text-primary: 17, 24, 39;
    /* #111827 */
    --color-text-secondary: 75, 85, 99;
    /* #4B5563 */

    /* Background colors */
    --color-bg-primary: 255, 255, 255;
    /* white */
    --color-bg-secondary: 249, 250, 251;
    /* #F9FAFB */

    /* Border colors */
    --color-border: 229, 231, 235;
    /* #E5E7EB */

    /* Form element colors */
    --color-input-bg: 255, 255, 255;
    /* white */
    --color-input-border: 209, 213, 219;
    /* #D1D5DB */

    /* Card colors */
    --color-card-bg: 255, 255, 255;
    /* white */
    --color-card-border: 229, 231, 235;
    /* #E5E7EB */
  }

  .dark {
    /* Text colors in dark mode */
    --color-text-primary: 245, 247, 249;
    /* #F5F7F9 */
    --color-text-secondary: 209, 213, 219;
    /* #D1D5DB */

    /* Background colors in dark mode */
    --color-bg-primary: 17, 24, 39;
    /* #111827 */
    --color-bg-secondary: 31, 41, 55;
    /* #1F2937 */

    /* Border colors in dark mode */
    --color-border: 55, 65, 81;
    /* #374151 */

    /* Form element colors in dark mode */
    --color-input-bg: 31, 41, 55;
    /* #1F2937 */
    --color-input-border: 75, 85, 99;
    /* #4B5563 */

    /* Card colors in dark mode */
    --color-card-bg: 31, 41, 55;
    /* #1F2937 */
    --color-card-border: 55, 65, 81;
    /* #374151 */
  }

  /* Light mode scrollbar */
  html:not(.dark) ::-webkit-scrollbar {
    width: 12px;
    background: #f3f4f6;
    /* gray-100 */
  }

  html:not(.dark) ::-webkit-scrollbar-thumb {
    background: #d1d5db;
    /* gray-300 */
    border-radius: 8px;
  }

  /* Dark mode scrollbar */
  html.dark ::-webkit-scrollbar {
    width: 12px;
    background: #1f2937;
    /* gray-800 */
  }

  html.dark ::-webkit-scrollbar-thumb {
    background: #374151;
    /* gray-700 */
    border-radius: 8px;
  }

  /* Automatic Font Hierarchy Application */

  /* Display font for main headings */
  h1,
  h2 {
    font-family: var(--font-display);
  }

  /* UI font for subheadings */
  h3,
  h4,
  h5,
  h6 {
    font-family: var(--font-ui);
  }

  /* Body font for content */
  body {
    font-family: var(--font-body);
  }

  p,
  li,
  td,
  dd,
  dt,
  blockquote {
    font-family: var(--font-body);
  }

  /* UI font for interface elements */
  button,
  input,
  select,
  textarea,
  label {
    font-family: var(--font-ui);
  }

  /* Navigation uses display font for impact */
  nav,
  nav a,
  .nav-item {
    font-family: var(--font-display);
  }

  /* Code and monospace elements keep their own font */
  code,
  pre,
  kbd,
  samp {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
  }

  /* Table headers use UI font */
  th {
    font-family: var(--font-ui);
  }

  /* Badges and tags use UI font */
  .badge,
  .tag,
  [role="status"],
  [role="alert"] {
    font-family: var(--font-ui);
  }
}

html,
body {
  @apply bg-white dark:bg-gray-900 text-text-light dark:text-text-dark;

  @media (prefers-color-scheme: dark) {
    color-scheme: dark;
  }
}